# å…è´¹éŸ³ä¹APIç³»ç»Ÿ

## æ¦‚è¿°

QAToolBoxç°åœ¨ä½¿ç”¨å…¨æ–°çš„å…è´¹éŸ³ä¹APIç³»ç»Ÿï¼Œæ”¯æŒå¤šç§å…è´¹éŸ³ä¹æºï¼Œä¸ºç”¨æˆ·æä¾›ä¸°å¯Œçš„éŸ³ä¹ä½“éªŒã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸµ å¤šæ¨¡å¼éŸ³ä¹æ”¯æŒ
- **å·¥ä½œæ¨¡å¼ (work)**: ä¸“æ³¨å·¥ä½œæ¨¡å¼ - è½»éŸ³ä¹ã€ç¯å¢ƒéŸ³ä¹ï¼Œå¸®åŠ©æé«˜ä¸“æ³¨åŠ›
- **ç”Ÿæ´»æ¨¡å¼ (life)**: ç”Ÿæ´»æ¨¡å¼ - è½»æ¾æ„‰å¿«çš„éŸ³ä¹ï¼Œé€‚åˆæ—¥å¸¸æ”¾æ¾
- **è®­ç»ƒæ¨¡å¼ (training)**: è®­ç»ƒæ¨¡å¼ - å……æ»¡æ´»åŠ›çš„éŸ³ä¹ï¼Œé€‚åˆè¿åŠ¨å¥èº«
- **æƒ…æ„Ÿæ¨¡å¼ (emo)**: æƒ…æ„Ÿæ¨¡å¼ - æƒ…æ„Ÿä¸°å¯Œçš„éŸ³ä¹ï¼Œé€‚åˆæƒ…ç»ªè¡¨è¾¾

### ğŸŒ å¤šæºéŸ³ä¹æ”¯æŒ
ç³»ç»Ÿæ”¯æŒå¤šä¸ªå…è´¹éŸ³ä¹APIæºï¼ŒæŒ‰ä¼˜å…ˆçº§é¡ºåºå°è¯•ï¼š

1. **Jamendo API** - å…è´¹éŸ³ä¹å¹³å°
2. **Incompetech** - Kevin MacLeodçš„å…è´¹éŸ³ä¹
3. **æœ¬åœ°éŸ³ä¹æ–‡ä»¶** - å¤‡ç”¨æ–¹æ¡ˆ

> **æ³¨æ„**: Free Music Archiveå’ŒccMixter APIç”±äºç¨³å®šæ€§é—®é¢˜å·²è¢«æš‚æ—¶ç¦ç”¨

### ğŸ”„ æ™ºèƒ½é™çº§æœºåˆ¶
- å½“åœ¨çº¿APIä¸å¯ç”¨æ—¶ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°æœ¬åœ°éŸ³ä¹æ–‡ä»¶
- ç¡®ä¿éŸ³ä¹æ’­æ”¾åŠŸèƒ½å§‹ç»ˆå¯ç”¨
- æ”¯æŒç¼“å­˜æœºåˆ¶ï¼Œæé«˜å“åº”é€Ÿåº¦

## APIæ¥å£

### è·å–éšæœºéŸ³ä¹
```
GET /tools/api/music/?mode={mode}&action=random
```

### è·å–æ¨¡å¼éŸ³ä¹åˆ—è¡¨
```
GET /tools/api/music/?mode={mode}&action=playlist
```

### æœç´¢éŸ³ä¹
```
GET /tools/api/music/?action=search&keyword={keyword}&mode={mode}
```

### è·å–æ‰€æœ‰æ¨¡å¼ä¿¡æ¯
```
GET /tools/api/music/?action=modes
```

### ä¸‹ä¸€é¦–éŸ³ä¹
```
POST /tools/api/music/next/
Content-Type: application/json

{
    "mode": "work"
}
```

## ä½¿ç”¨ç¤ºä¾‹

### Pythonä»£ç ç¤ºä¾‹
```python
from apps.tools.utils.music_api import free_music_api

# è·å–å·¥ä½œæ¨¡å¼çš„éšæœºéŸ³ä¹
song = free_music_api.get_random_song('work')
print(f"å½“å‰æ’­æ”¾: {song['name']} - {song['artist']}")

# è·å–æ‰€æœ‰å¯ç”¨æ¨¡å¼
modes = free_music_api.get_available_modes()
print(f"å¯ç”¨æ¨¡å¼: {modes}")

# æœç´¢éŸ³ä¹
results = free_music_api.search_song('piano', 'work')
for song in results:
    print(f"æ‰¾åˆ°: {song['name']} - {song['artist']}")
```

## é…ç½®è¯´æ˜

### 1. Jamendo APIé…ç½®
- è®¿é—® https://www.jamendo.com/ æ³¨å†Œå…è´¹è´¦æˆ·
- è·å– `client_id`
- åœ¨ `apps/tools/utils/music_api.py` ä¸­é…ç½®

### 2. æœ¬åœ°éŸ³ä¹æ–‡ä»¶
å¤‡ç”¨æœ¬åœ°éŸ³ä¹æ–‡ä»¶ä½äº `src/static/audio/`:
- `friday.mp3`, `monday.mp3` - å·¥ä½œæ¨¡å¼
- `saturday.mp3`, `sunday.mp3` - ç”Ÿæ´»æ¨¡å¼  
- `tuesday.mp3`, `thursday.mp3` - è®­ç»ƒæ¨¡å¼
- `Eternxlkz - SLAY!.flac`, `keshi - 2 soon.flac` - æƒ…æ„Ÿæ¨¡å¼

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **APIè¿æ¥å¤±è´¥**: ç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§åˆ°æœ¬åœ°éŸ³ä¹æ–‡ä»¶
2. **éŸ³ä¹æ— æ³•æ’­æ”¾**: æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒAPIé…ç½®
3. **ç¼“å­˜é—®é¢˜**: æ¸…é™¤æµè§ˆå™¨ç¼“å­˜æˆ–ç­‰å¾…1å°æ—¶ç¼“å­˜è¿‡æœŸ

### ç¦ç”¨APIè¯´æ˜
- **Free Music Archive**: ç”±äºAPIæœåŠ¡ä¸ç¨³å®šï¼Œå·²æš‚æ—¶ç¦ç”¨
- **ccMixter**: ç”±äºç½‘ç»œè¿æ¥é—®é¢˜ï¼Œå·²æš‚æ—¶ç¦ç”¨

## æŠ€æœ¯ç‰¹æ€§

### æ™ºèƒ½é™çº§æœºåˆ¶
```python
# å½“åœ¨çº¿APIä¸å¯ç”¨æ—¶ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°æœ¬åœ°éŸ³ä¹
if not all_tracks:
    print(f"æ‰€æœ‰å…è´¹APIéƒ½å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°éŸ³ä¹æ•°æ®")
    all_tracks = self.local_music.get(mode, [])
```

### ç¼“å­˜ç³»ç»Ÿ
```python
# 1å°æ—¶ç¼“å­˜ï¼Œæé«˜å“åº”é€Ÿåº¦
self.cache_expire = 3600
```

### å¤šæºæ”¯æŒ
```python
# æŒ‰ä¼˜å…ˆçº§å°è¯•ä¸åŒAPI
self.free_apis = [
    self._try_jamendo_api,
    self._try_incompetech_api
]
```

## æ›´æ–°æ—¥å¿—

### v2.1.0 (æœ€æ–°)
- âœ… ç¦ç”¨ä¸ç¨³å®šçš„Free Music Archive API
- âœ… ç¦ç”¨ä¸ç¨³å®šçš„ccMixter API
- âœ… ä¼˜åŒ–é”™è¯¯å¤„ç†æœºåˆ¶
- âœ… æ”¹è¿›é™çº§é€»è¾‘

### v2.0.0
- âœ… é‡æ„ä¸ºå…è´¹éŸ³ä¹APIç³»ç»Ÿ
- âœ… æ”¯æŒå¤šç§éŸ³ä¹æº
- âœ… æ·»åŠ æ™ºèƒ½é™çº§æœºåˆ¶
- âœ… å®Œå–„ç¼“å­˜ç³»ç»Ÿ 