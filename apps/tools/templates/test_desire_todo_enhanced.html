{% extends 'base.html' %}
{% load static %}

{% block title %}欲望代办和反程序员形象测试{% endblock %}

{% block extra_css %}
<style>
.test-container {
  min-height: 100vh;
  background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
  color: #ffffff;
  padding: 2rem;
}

.test-header {
  text-align: center;
  margin-bottom: 3rem;
}

.test-title {
  font-size: 3rem;
  font-weight: 900;
  background: linear-gradient(135deg, #ff4444, #ff6b35, #ffd700);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 1rem;
}

.test-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 2rem;
  max-width: 1600px;
  margin: 0 auto;
}

.test-card {
  background: rgba(26, 26, 26, 0.9);
  border: 3px solid rgba(255, 68, 68, 0.4);
  border-radius: 15px;
  padding: 2rem;
  text-align: center;
}

.test-card h3 {
  color: #ff4444;
  margin-bottom: 1rem;
}

.test-btn {
  background: linear-gradient(45deg, #ff4444, #ff6b35);
  color: white;
  border: none;
  padding: 1rem 2rem;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  margin: 0.5rem;
  text-decoration: none;
  display: inline-block;
}

.test-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(255, 68, 68, 0.4);
}

.feature-list {
  text-align: left;
  margin-top: 1rem;
}

.feature-list li {
  margin-bottom: 0.5rem;
  color: rgba(255, 255, 255, 0.8);
}

.feature-list .highlight {
  color: #ffd700;
  font-weight: 600;
}
</style>
{% endblock %}

{% block content %}
<div class="test-container">
  <div class="test-header">
    <h1 class="test-title">🔥 欲望代办 & 反程序员形象测试</h1>
    <p>测试增强后的功能特性</p>
  </div>

  <div class="test-grid">
    <!-- 反程序员形象测试 -->
    <div class="test-card">
      <h3>🤖 反程序员形象系统</h3>
      <p>测试反程序员形象的增强功能</p>
      
      <div class="feature-list">
        <li><span class="highlight">✓</span> 等级系统和经验值</li>
        <li><span class="highlight">✓</span> 成就系统</li>
        <li><span class="highlight">✓</span> 代码片段管理</li>
        <li><span class="highlight">✓</span> 点赞和分享功能</li>
        <li><span class="highlight">✓</span> 实时统计更新</li>
      </div>
      
      <a href="/tools/based-dev-avatar/" class="test-btn">进入反程序员形象</a>
    </div>

    <!-- 欲望代办测试 -->
    <div class="test-card">
      <h3>💎 欲望代办系统</h3>
      <p>测试欲望代办的增强功能</p>
      
      <div class="feature-list">
        <li><span class="highlight">✓</span> 分类管理</li>
        <li><span class="highlight">✓</span> 优先级设置</li>
        <li><span class="highlight">✓</span> 奖励系统</li>
        <li><span class="highlight">✓</span> 实时统计</li>
        <li><span class="highlight">✓</span> 完成动画</li>
      </div>
      
      <a href="/tools/desire-todo-enhanced/" class="test-btn">进入欲望代办</a>
    </div>

    <!-- API测试 -->
    <div class="test-card">
      <h3>🔧 API功能测试</h3>
      <p>测试新增的API接口</p>
      
      <div class="feature-list">
        <li><span class="highlight">✓</span> 反程序员形象API</li>
        <li><span class="highlight">✓</span> 欲望代办API</li>
        <li><span class="highlight">✓</span> 统计数据API</li>
        <li><span class="highlight">✓</span> 成就系统API</li>
        <li><span class="highlight">✓</span> 实时通知</li>
      </div>
      
      <button class="test-btn" onclick="testAPIs()">测试API</button>
    </div>

    <!-- 功能对比 -->
    <div class="test-card">
      <h3>📊 功能对比</h3>
      <p>增强前后的功能对比</p>
      
      <div class="feature-list">
        <li><span class="highlight">增强前:</span> 基础形象展示</li>
        <li><span class="highlight">增强后:</span> 完整等级成就系统</li>
        <li><span class="highlight">增强前:</span> 静态代办列表</li>
        <li><span class="highlight">增强后:</span> 动态分类管理</li>
        <li><span class="highlight">增强前:</span> 无API接口</li>
        <li><span class="highlight">增强后:</span> 完整RESTful API</li>
      </div>
      
      <button class="test-btn" onclick="showComparison()">查看对比</button>
    </div>
  </div>
</div>

<script>
function testAPIs() {
  // 测试反程序员形象API
  fetch('/tools/api/based-dev-avatar/get/')
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        alert('反程序员形象API测试成功！\n等级: ' + data.user_stats.level + '\n称号: ' + data.user_stats.title);
      }
    })
    .catch(error => {
      alert('反程序员形象API测试失败: ' + error.message);
    });
  
  // 测试欲望代办API
  fetch('/tools/api/desire-todos/stats/')
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        alert('欲望代办API测试成功！\n总代办: ' + data.stats.total_todos + '\n已完成: ' + data.stats.completed_todos);
      }
    })
    .catch(error => {
      alert('欲望代办API测试失败: ' + error.message);
    });
}

function showComparison() {
  const comparison = `
功能增强对比：

🤖 反程序员形象系统
增强前：
- 基础形象展示
- 静态代码片段
- 无交互功能

增强后：
- 等级系统 (LV.1-10)
- 经验值进度条
- 成就系统 (代码工匠、社区明星等)
- 实时统计更新
- 点赞和分享功能
- 完整的API接口

💎 欲望代办系统
增强前：
- 静态代办列表
- 基础分类
- 无数据持久化

增强后：
- 动态分类管理 (工作、个人、健康等)
- 优先级系统 (高、中、低)
- 奖励系统 (游戏时间、美食、购物、旅行)
- 实时统计和进度
- 完成动画效果
- 完整的CRUD API

🔧 技术改进
- 新增8个API接口
- 实时数据同步
- 响应式设计优化
- 动画效果增强
- 错误处理和通知系统
  `;
  
  alert(comparison);
}

// 页面加载完成后的初始化
document.addEventListener('DOMContentLoaded', function() {
  console.log('欲望代办和反程序员形象测试页面加载完成');
  console.log('新增功能：');
  console.log('- 反程序员形象等级系统');
  console.log('- 欲望代办分类管理');
  console.log('- 实时API接口');
  console.log('- 成就和奖励系统');
});
</script>
{% endblock %} 