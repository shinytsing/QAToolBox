# QAToolBox 生产环境配置文件
# =============================================
# 服务器: 47.103.143.152
# 域名: https://shenyiqing.xin/
# 解决所有依赖和环境变量问题
# =============================================

# ===== Django 核心配置 =====
SECRET_KEY=django-shenyiqing-production-key-2024
DEBUG=False
DJANGO_SETTINGS_MODULE=config.settings.production

# ===== 允许的主机配置 =====
ALLOWED_HOSTS=shenyiqing.xin,www.shenyiqing.xin,47.103.143.152,localhost,127.0.0.1

# ===== 数据库配置 (PostgreSQL) =====
DB_ENGINE=django.db.backends.postgresql
DB_NAME=qatoolbox
DB_USER=qatoolbox
DB_PASSWORD=QAToolBox@2024
DB_HOST=localhost
DB_PORT=5432

# ===== Redis 配置 =====
REDIS_URL=redis://localhost:6379/0
CACHE_URL=redis://localhost:6379/1

# ===== 站点配置 =====
SITE_URL=https://shenyiqing.xin
SITE_NAME=QAToolBox
FORCE_SCRIPT_NAME=

# ===== 静态文件配置 =====
STATIC_URL=/static/
STATIC_ROOT=/var/www/qatoolbox/static/
STATICFILES_STORAGE=whitenoise.storage.CompressedManifestStaticFilesStorage

# ===== 媒体文件配置 =====
MEDIA_URL=/media/
MEDIA_ROOT=/var/www/qatoolbox/media/

# ===== 文件上传配置 =====
DATA_UPLOAD_MAX_MEMORY_SIZE=104857600
FILE_UPLOAD_MAX_MEMORY_SIZE=104857600
MAX_UPLOAD_SIZE=104857600
FILE_UPLOAD_PERMISSIONS=0o644

# ===== 安全配置 =====
SECURE_SSL_REDIRECT=True
SECURE_PROXY_SSL_HEADER=HTTP_X_FORWARDED_PROTO,https
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True
SECURE_CONTENT_TYPE_NOSNIFF=True
SECURE_BROWSER_XSS_FILTER=True
X_FRAME_OPTIONS=DENY

# ===== CSRF 配置 =====
CSRF_TRUSTED_ORIGINS=https://shenyiqing.xin,https://www.shenyiqing.xin
CSRF_COOKIE_SECURE=True
SESSION_COOKIE_SECURE=True

# ===== CORS 配置 =====
CORS_ALLOWED_ORIGINS=https://shenyiqing.xin,https://www.shenyiqing.xin
CORS_ALLOW_CREDENTIALS=True
CORS_ALLOW_ALL_ORIGINS=False

# ===== 邮件配置 =====
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.qq.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@qq.com
EMAIL_HOST_PASSWORD=your-email-password
DEFAULT_FROM_EMAIL=noreply@shenyiqing.xin

# ===== 日志配置 =====
LOG_LEVEL=INFO
LOG_FILE=/var/log/qatoolbox/django.log
LOG_MAX_SIZE=10485760
LOG_BACKUP_COUNT=5

# ===== API 配置 =====
API_RATE_LIMIT_ANON=1000/hour
API_RATE_LIMIT_USER=10000/hour
API_THROTTLE_ENABLED=True

# ===== 缓存配置 =====
CACHE_TIMEOUT=3600
SESSION_CACHE_ALIAS=default
SESSION_ENGINE=django.contrib.sessions.backends.cache

# ===== 数据库连接池配置 =====
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30

# ===== Celery 配置 =====
CELERY_BROKER_URL=redis://localhost:6379/2
CELERY_RESULT_BACKEND=redis://localhost:6379/3
CELERY_ACCEPT_CONTENT=['json']
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_TIMEZONE=Asia/Shanghai

# ===== 第三方 API 配置 =====
# DeepSeek AI API
DEEPSEEK_API_KEY=your-deepseek-api-key-here
DEEPSEEK_API_URL=https://api.deepseek.com

# Google API
GOOGLE_API_KEY=your-google-api-key-here
GOOGLE_CSE_ID=your-google-cse-id-here

# 天气 API
OPENWEATHER_API_KEY=your-openweather-api-key-here

# ===== 监控配置 =====
SENTRY_DSN=your-sentry-dsn-here
SENTRY_ENVIRONMENT=production

# ===== 备份配置 =====
BACKUP_ENABLED=True
BACKUP_STORAGE_PATH=/var/backups/qatoolbox
BACKUP_RETENTION_DAYS=30

# ===== WebSocket 配置 =====
ASGI_APPLICATION=asgi.application
CHANNEL_LAYERS_BACKEND=channels_redis.core.RedisChannelLayer
CHANNEL_LAYERS_CONFIG_HOSTS=[(127.0.0.1, 6379)]

# ===== 开发工具配置（生产环境禁用） =====
DEBUG_TOOLBAR_ENABLED=False
INTERNAL_IPS=

# ===== 时区和语言配置 =====
TIME_ZONE=Asia/Shanghai
LANGUAGE_CODE=zh-hans
USE_I18N=True
USE_L10N=True
USE_TZ=True

# ===== 其他配置 =====
APPEND_SLASH=True
PREPEND_WWW=False
SECURE_REDIRECT_EXEMPT=[]

# ===== 性能配置 =====
DATABASE_CONN_MAX_AGE=60
TEMPLATE_CACHE_TIMEOUT=3600
STATICFILES_CACHE_TIMEOUT=31536000

# ===== 机器学习模型配置 =====
# PyTorch 配置
TORCH_DEVICE=cpu
TORCH_MODEL_PATH=/var/lib/qatoolbox/models/
TORCH_CACHE_DIR=/var/cache/qatoolbox/torch/

# OpenCV 配置
OPENCV_CACHE_DIR=/var/cache/qatoolbox/opencv/
OPENCV_THREAD_COUNT=4

# ===== 文件处理配置 =====
PDF_PROCESSING_TIMEOUT=300
IMAGE_PROCESSING_TIMEOUT=120
AUDIO_PROCESSING_TIMEOUT=600
VIDEO_PROCESSING_TIMEOUT=1200

# ===== 搜索引擎配置 =====
SEARCH_ENGINE_TIMEOUT=30
SEARCH_RESULTS_LIMIT=100

# ===== 社交媒体 API 配置 =====
XIAOHONGSHU_API_KEY=your-xiaohongshu-api-key
DOUYIN_API_KEY=your-douyin-api-key
NETEASE_API_KEY=your-netease-api-key

# ===== 健康检查配置 =====
HEALTH_CHECK_ENABLED=True
HEALTH_CHECK_DATABASE=True
HEALTH_CHECK_CACHE=True
HEALTH_CHECK_STORAGE=True
