{% extends 'tools/base_tool.html' %}
{% load static %}

{% block title %}å†¥æƒ³å¼•å¯¼å¸ˆ - å¯»æ‰¾å†…å¿ƒçš„å¹³é™{% endblock %}

{% block tool_content %}
<div class="meditation-container">
    <div class="meditation-header">
        <h1><i class="fas fa-om"></i> å†¥æƒ³å¼•å¯¼å¸ˆ</h1>
        <p class="meditation-subtitle">å¯»æ‰¾å†…å¿ƒçš„å¹³é™ï¼Œä¸è‡ªæˆ‘å¯¹è¯</p>
    </div>

    <div class="meditation-content">
        <!-- å†¥æƒ³ç±»å‹é€‰æ‹© -->
        <div class="meditation-types">
            <h3><i class="fas fa-list"></i> é€‰æ‹©å†¥æƒ³ç±»å‹</h3>
            <div class="types-grid">
                <div class="type-card" data-type="breathing">
                    <div class="type-icon">ğŸ«</div>
                    <div class="type-name">å‘¼å¸å†¥æƒ³</div>
                </div>
                <div class="type-card" data-type="mindfulness">
                    <div class="type-icon">ğŸ§˜â€â™€ï¸</div>
                    <div class="type-name">æ­£å¿µå†¥æƒ³</div>
                </div>
                <div class="type-card" data-type="loving">
                    <div class="type-icon">ğŸ’</div>
                    <div class="type-name">æ…ˆå¿ƒå†¥æƒ³</div>
                </div>
                <div class="type-card" data-type="body">
                    <div class="type-icon">ğŸ‘¤</div>
                    <div class="type-name">èº«ä½“æ‰«æ</div>
                </div>
            </div>
        </div>

        <!-- å†¥æƒ³ç»ƒä¹ åŒºåŸŸ -->
        <div class="meditation-practice">
            <h3><i class="fas fa-play-circle"></i> å†¥æƒ³ç»ƒä¹ </h3>
            <div class="practice-area">
                <div class="breathing-circle" id="breathingCircle">
                    <div class="circle-inner">
                        <div class="breathing-text" id="breathingText">å‡†å¤‡å¼€å§‹</div>
                        <div class="timer" id="timer">10:00</div>
                    </div>
                </div>
                
                <div class="practice-controls">
                    <button class="control-btn start-btn" onclick="startMeditation()">
                        <i class="fas fa-play"></i> å¼€å§‹å†¥æƒ³
                    </button>
                    <button class="control-btn reset-btn" onclick="resetMeditation()">
                        <i class="fas fa-redo"></i> é‡ç½®
                    </button>
                </div>
            </div>
        </div>

        <!-- å†¥æƒ³æŒ‡å¯¼ -->
        <div class="meditation-guidance">
            <h3><i class="fas fa-lightbulb"></i> å†¥æƒ³æŒ‡å¯¼</h3>
            <div class="guidance-content">
                <div class="guidance-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>æ‰¾åˆ°èˆ’é€‚çš„å§¿åŠ¿</h4>
                        <p>ååœ¨å«å­ä¸Šæˆ–æ¤…å­ä¸Šï¼Œä¿æŒèƒŒéƒ¨æŒºç›´ä½†ä¸åƒµç¡¬ã€‚</p>
                    </div>
                </div>
                <div class="guidance-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>é—­ä¸Šçœ¼ç›</h4>
                        <p>è½»è½»é—­ä¸Šçœ¼ç›ï¼Œè®©è§†è§‰çš„å¹²æ‰°æ¶ˆå¤±ã€‚</p>
                    </div>
                </div>
                <div class="guidance-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>å…³æ³¨å‘¼å¸</h4>
                        <p>è‡ªç„¶åœ°å‘¼å¸ï¼Œè§‚å¯Ÿå‘¼å¸çš„æµåŠ¨ã€‚</p>
                    </div>
                </div>
                <div class="guidance-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>ä¿æŒä¸“æ³¨</h4>
                        <p>å½“æ€ç»ªé£˜æ•£æ—¶ï¼Œæ¸©æŸ”åœ°å°†æ³¨æ„åŠ›å¸¦å›åˆ°å‘¼å¸ä¸Šã€‚</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.meditation-container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 20px;
    color: white;
}

.meditation-header {
    text-align: center;
    margin-bottom: 30px;
}

.meditation-header h1 {
    font-size: 2.5rem;
    margin-bottom: 10px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

.meditation-subtitle {
    font-size: 1.1rem;
    opacity: 0.9;
}

.meditation-content > div {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 20px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.meditation-content h3 {
    margin-bottom: 15px;
    font-size: 1.3rem;
    display: flex;
    align-items: center;
    gap: 10px;
}

.types-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.type-card {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    padding: 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.type-card:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-3px);
}

.type-card.selected {
    background: rgba(255, 255, 255, 0.4);
    border-color: #fff;
}

.type-icon {
    font-size: 3rem;
    margin-bottom: 10px;
}

.type-name {
    font-size: 1.2rem;
    font-weight: 600;
}

.practice-area {
    text-align: center;
    margin-top: 15px;
}

.breathing-circle {
    width: 200px;
    height: 200px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    margin: 0 auto 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.5s ease;
    animation: pulse 4s ease-in-out infinite;
}

.circle-inner {
    text-align: center;
}

.breathing-text {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 5px;
}

.timer {
    font-size: 1.5rem;
    font-weight: bold;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

.practice-controls {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-bottom: 20px;
}

.control-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 25px;
    padding: 12px 25px;
    color: white;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
}

.control-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
}

.start-btn {
    background: linear-gradient(45deg, #4CAF50, #45a049);
}

.reset-btn {
    background: linear-gradient(45deg, #9C27B0, #7B1FA2);
}

.guidance-content {
    display: grid;
    gap: 15px;
    margin-top: 15px;
}

.guidance-step {
    display: flex;
    gap: 15px;
    align-items: flex-start;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 15px;
}

.step-number {
    width: 30px;
    height: 30px;
    background: linear-gradient(45deg, #4CAF50, #45a049);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    flex-shrink: 0;
}

.step-content h4 {
    margin-bottom: 5px;
    font-size: 1.1rem;
}

.step-content p {
    opacity: 0.9;
    line-height: 1.5;
}
</style>

<script>
let currentType = null;
let isMeditating = false;

document.addEventListener('DOMContentLoaded', function() {
    initializeTypeSelector();
});

function initializeTypeSelector() {
    const typeCards = document.querySelectorAll('.type-card');
    typeCards.forEach(card => {
        card.addEventListener('click', function() {
            typeCards.forEach(c => c.classList.remove('selected'));
            this.classList.add('selected');
            currentType = this.dataset.type;
        });
    });
}

function startMeditation() {
    if (!currentType) {
        alert('è¯·å…ˆé€‰æ‹©å†¥æƒ³ç±»å‹');
        return;
    }
    
    if (isMeditating) return;
    
    isMeditating = true;
    document.getElementById('breathingText').textContent = 'å†¥æƒ³ä¸­...';
    document.querySelector('.start-btn').textContent = 'å†¥æƒ³ä¸­...';
    document.querySelector('.start-btn').disabled = true;
    
    // æ¨¡æ‹Ÿ10åˆ†é’Ÿå†¥æƒ³
    setTimeout(() => {
        isMeditating = false;
        document.getElementById('breathingText').textContent = 'å†¥æƒ³å®Œæˆ';
        document.querySelector('.start-btn').textContent = 'å¼€å§‹å†¥æƒ³';
        document.querySelector('.start-btn').disabled = false;
        alert('æ­å–œï¼æ‚¨å®Œæˆäº†å†¥æƒ³ç»ƒä¹ ã€‚');
    }, 10000); // 10ç§’æ¼”ç¤º
}

function resetMeditation() {
    isMeditating = false;
    document.getElementById('breathingText').textContent = 'å‡†å¤‡å¼€å§‹';
    document.getElementById('timer').textContent = '10:00';
    document.querySelector('.start-btn').textContent = 'å¼€å§‹å†¥æƒ³';
    document.querySelector('.start-btn').disabled = false;
}
</script>
{% endblock %} 