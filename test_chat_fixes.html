<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŠå¤©åŠŸèƒ½ä¿®å¤æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #f093fb;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .test-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #f093fb;
        }
        
        .test-description {
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .chat-simulation {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            max-width: 70%;
        }
        
        .message.own {
            background: rgba(240, 147, 251, 0.3);
            margin-left: auto;
            text-align: right;
        }
        
        .message.other {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .message-content {
            margin-bottom: 5px;
        }
        
        .message-time {
            font-size: 0.8em;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .message-status {
            font-size: 0.8em;
            color: #4CAF50;
            margin-top: 5px;
        }
        
        .message-actions {
            margin-top: 5px;
        }
        
        .action-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            margin-left: 5px;
        }
        
        .chat-input-area {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .chat-input {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            resize: none;
        }
        
        .chat-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .send-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .send-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .cooldown-indicator {
            margin-top: 10px;
            font-size: 0.9em;
            color: #ff9800;
        }
        
        .test-button {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(240, 147, 251, 0.4);
        }
        
        .status-display {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’¬ èŠå¤©åŠŸèƒ½ä¿®å¤æµ‹è¯•</h1>
        
        <div class="test-section">
            <div class="test-title">ğŸ”§ ä¿®å¤å†…å®¹</div>
            <div class="test-description">
                æœ¬æ¬¡ä¿®å¤è§£å†³äº†ä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼š
            </div>
            
            <ul>
                <li><strong>å›è½¦é”®é‡å¤å‘é€é—®é¢˜</strong>: ä¿®å¤äº†æŒ‰å›è½¦é”®å‘é€æ¶ˆæ¯æ—¶å¯èƒ½å‡ºç°é‡å¤æ¶ˆæ¯çš„é—®é¢˜</li>
                <li><strong>å·²è¯»æœªè¯»çŠ¶æ€æ˜¾ç¤ºé—®é¢˜</strong>: ä¿®å¤äº†åœ¨å¯¹æ–¹æ¶ˆæ¯ä¸Šæ˜¾ç¤ºå·²è¯»æœªè¯»çŠ¶æ€çš„é—®é¢˜ï¼Œç°åœ¨åªåœ¨è‡ªå·±çš„æ¶ˆæ¯ä¸Šæ˜¾ç¤º</li>
            </ul>
        </div>
        
        <div class="test-section">
            <div class="test-title">ğŸ¯ ä¿®å¤1: å›è½¦é”®é˜²é‡å¤å‘é€</div>
            <div class="test-description">
                æµ‹è¯•å›è½¦é”®å‘é€æ¶ˆæ¯çš„é˜²é‡å¤æœºåˆ¶ï¼š
            </div>
            
            <div class="chat-simulation" id="chat-simulation">
                <div class="message other">
                    <div class="message-content">ä½ å¥½ï¼</div>
                    <div class="message-time">14:30</div>
                </div>
                <div class="message own">
                    <div class="message-content">ä½ å¥½ï¼å¾ˆé«˜å…´è®¤è¯†ä½ </div>
                    <div class="message-time">14:31</div>
                    <div class="message-status">å·²è¯»</div>
                </div>
            </div>
            
            <div class="chat-input-area">
                <textarea 
                    class="chat-input" 
                    id="test-input" 
                    placeholder="è¾“å…¥æ¶ˆæ¯ï¼ŒæŒ‰å›è½¦å‘é€..." 
                    rows="2"
                    onkeydown="handleTestKeyDown(event)"
                ></textarea>
                <button class="send-btn" onclick="sendTestMessage()" id="test-send-btn">
                    å‘é€
                </button>
            </div>
            
            <div class="cooldown-indicator" id="cooldown-indicator"></div>
            
            <div class="status-display" id="test-status">
                çŠ¶æ€: ç­‰å¾…æµ‹è¯•...
            </div>
        </div>
        
        <div class="test-section">
            <div class="test-title">ğŸ‘ï¸ ä¿®å¤2: å·²è¯»æœªè¯»çŠ¶æ€æ˜¾ç¤º</div>
            <div class="test-description">
                æµ‹è¯•å·²è¯»æœªè¯»çŠ¶æ€åªåœ¨è‡ªå·±çš„æ¶ˆæ¯ä¸Šæ˜¾ç¤ºï¼š
            </div>
            
            <div class="chat-simulation">
                <div class="message other">
                    <div class="message-content">è¿™æ˜¯å¯¹æ–¹çš„æ¶ˆæ¯</div>
                    <div class="message-time">14:32</div>
                    <!-- å¯¹æ–¹æ¶ˆæ¯ä¸æ˜¾ç¤ºå·²è¯»æœªè¯»çŠ¶æ€ -->
                </div>
                <div class="message own">
                    <div class="message-content">è¿™æ˜¯æˆ‘çš„æ¶ˆæ¯</div>
                    <div class="message-time">14:33</div>
                    <div class="message-status">æœªè¯»</div>
                    <div class="message-actions">
                        <button class="action-btn">æ’¤å›</button>
                    </div>
                </div>
                <div class="message own">
                    <div class="message-content">è¿™æ˜¯å¦ä¸€æ¡æˆ‘çš„æ¶ˆæ¯</div>
                    <div class="message-time">14:34</div>
                    <div class="message-status">å·²è¯»</div>
                    <div class="message-actions">
                        <button class="action-btn">æ’¤å›</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <div class="test-title">ğŸ§ª æµ‹è¯•åŠŸèƒ½</div>
            <div class="test-description">
                ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è¿›è¡Œä¸åŒåœºæ™¯çš„æµ‹è¯•ï¼š
            </div>
            
            <button class="test-button" onclick="testEnterKey()">æµ‹è¯•å›è½¦é”®é˜²é‡å¤</button>
            <button class="test-button" onclick="testCooldown()">æµ‹è¯•å‘é€å†·å´</button>
            <button class="test-button" onclick="testMessageStatus()">æµ‹è¯•æ¶ˆæ¯çŠ¶æ€æ˜¾ç¤º</button>
            <button class="test-button" onclick="clearTestStatus()">æ¸…é™¤æµ‹è¯•çŠ¶æ€</button>
        </div>
    </div>

    <script>
        let testSendCooldown = false;
        let testCooldownTimer = null;
        let messageCounter = 0;
        
        function handleTestKeyDown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                event.stopPropagation();
                
                if (!testSendCooldown && !document.getElementById('test-send-btn').disabled) {
                    sendTestMessage();
                }
                return false;
            }
        }
        
        function sendTestMessage() {
            if (testSendCooldown) {
                updateTestStatus('å‘é€è¢«å†·å´é˜»æ­¢');
                return;
            }
            
            const input = document.getElementById('test-input');
            const content = input.value.trim();
            
            if (!content) {
                updateTestStatus('æ¶ˆæ¯å†…å®¹ä¸ºç©ºï¼Œå‘é€è¢«é˜»æ­¢');
                return;
            }
            
            // ç«‹å³è®¾ç½®å†·å´
            setTestCooldown(2000);
            
            const sendBtn = document.getElementById('test-send-btn');
            sendBtn.disabled = true;
            
            // æ¨¡æ‹Ÿå‘é€å»¶è¿Ÿ
            setTimeout(() => {
                addTestMessage(content, true);
                input.value = '';
                sendBtn.disabled = false;
                updateTestStatus(`æ¶ˆæ¯å‘é€æˆåŠŸ: "${content}"`);
            }, 500);
        }
        
        function setTestCooldown(duration) {
            testSendCooldown = true;
            const cooldownElement = document.getElementById('cooldown-indicator');
            cooldownElement.textContent = 'å‘é€å†·å´ä¸­...';
            
            if (testCooldownTimer) {
                clearTimeout(testCooldownTimer);
            }
            
            testCooldownTimer = setTimeout(() => {
                testSendCooldown = false;
                cooldownElement.textContent = '';
            }, duration);
        }
        
        function addTestMessage(content, isOwn = false) {
            const chatSimulation = document.getElementById('chat-simulation');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isOwn ? 'own' : 'other'}`;
            
            const time = new Date().toLocaleTimeString('zh-CN', {
                hour: '2-digit',
                minute: '2-digit'
            });
            
            let statusHtml = '';
            let actionsHtml = '';
            
            if (isOwn) {
                statusHtml = '<div class="message-status">æœªè¯»</div>';
                actionsHtml = '<div class="message-actions"><button class="action-btn">æ’¤å›</button></div>';
            }
            
            messageDiv.innerHTML = `
                <div class="message-content">${content}</div>
                <div class="message-time">${time}</div>
                ${statusHtml}
                ${actionsHtml}
            `;
            
            chatSimulation.appendChild(messageDiv);
            chatSimulation.scrollTop = chatSimulation.scrollHeight;
        }
        
        function updateTestStatus(message) {
            const statusDisplay = document.getElementById('test-status');
            statusDisplay.textContent = `çŠ¶æ€: ${message}`;
        }
        
        function testEnterKey() {
            updateTestStatus('æµ‹è¯•å›è½¦é”®é˜²é‡å¤æœºåˆ¶...\n- å¿«é€ŸæŒ‰å›è½¦é”®\n- è§‚å¯Ÿæ˜¯å¦åªå‘é€ä¸€æ¡æ¶ˆæ¯\n- æ£€æŸ¥å†·å´çŠ¶æ€');
        }
        
        function testCooldown() {
            updateTestStatus('æµ‹è¯•å‘é€å†·å´æœºåˆ¶...\n- å‘é€ä¸€æ¡æ¶ˆæ¯\n- åœ¨å†·å´æœŸé—´å°è¯•å†æ¬¡å‘é€\n- è§‚å¯Ÿå†·å´æç¤º');
        }
        
        function testMessageStatus() {
            updateTestStatus('æµ‹è¯•æ¶ˆæ¯çŠ¶æ€æ˜¾ç¤º...\n- è‡ªå·±çš„æ¶ˆæ¯æ˜¾ç¤ºå·²è¯»/æœªè¯»çŠ¶æ€\n- å¯¹æ–¹çš„æ¶ˆæ¯ä¸æ˜¾ç¤ºçŠ¶æ€\n- åªæœ‰è‡ªå·±çš„æ¶ˆæ¯æœ‰æ’¤å›æŒ‰é’®');
        }
        
        function clearTestStatus() {
            updateTestStatus('ç­‰å¾…æµ‹è¯•...');
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateTestStatus('æµ‹è¯•é¡µé¢å·²åŠ è½½ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•');
        });
    </script>
</body>
</html> 