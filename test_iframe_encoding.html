<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iframeç¼–ç æµ‹è¯•</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background-color: #f5f5f5; 
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            background: white; 
            padding: 20px; 
            border-radius: 8px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
        }
        .test-iframe { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #e0e0e0; 
            border-radius: 4px; 
            margin: 20px 0; 
        }
        .test-content {
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 4px;
        }
        .test-button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background-color: #0056b3;
        }
        .log {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ iframeå†…å®¹ç¼–ç æµ‹è¯•</h1>
        
        <div class="test-content">
            <h3>æµ‹è¯•ä¸åŒç¼–ç çš„å†…å®¹æ˜¾ç¤ºï¼š</h3>
            <button class="test-button" onclick="testUtf8Content()">æµ‹è¯•UTF-8ä¸­æ–‡å†…å®¹</button>
            <button class="test-button" onclick="testGBKContent()">æµ‹è¯•GBKç¼–ç å†…å®¹</button>
            <button class="test-button" onclick="testBlobUrl()">æµ‹è¯•Blob URLæ–¹å¼</button>
            <button class="test-button" onclick="testSrcdoc()">æµ‹è¯•srcdocæ–¹å¼</button>
            <button class="test-button" onclick="testYouTube()">æµ‹è¯•YouTubeé¡µé¢</button>
            <button class="test-button" onclick="clearFrame()">æ¸…ç©ºiframe</button>
        </div>

        <iframe id="testFrame" class="test-iframe" sandbox="allow-same-origin allow-scripts"></iframe>
        
        <div id="log" class="log">ğŸ“‹ æµ‹è¯•æ—¥å¿—ï¼š\n</div>
    </div>

    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.textContent += `[${timestamp}] ${message}\n`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function testUtf8Content() {
            log('æµ‹è¯•UTF-8ä¸­æ–‡å†…å®¹...');
            const content = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <title>UTF-8æµ‹è¯•</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; }
                        h1 { color: #333; }
                        p { line-height: 1.6; }
                    </style>
                </head>
                <body>
                    <h1>ğŸŒŸ UTF-8ç¼–ç æµ‹è¯•</h1>
                    <p>è¿™æ˜¯ä¸€æ®µä¸­æ–‡å†…å®¹ï¼ŒåŒ…å«å„ç§å­—ç¬¦ï¼š</p>
                    <ul>
                        <li>ä¸­æ–‡å­—ç¬¦ï¼šä½ å¥½ä¸–ç•Œ</li>
                        <li>è‹±æ–‡å­—ç¬¦ï¼šHello World</li>
                        <li>æ•°å­—ï¼š123456789</li>
                        <li>ç‰¹æ®Šç¬¦å·ï¼šï¼@#ï¿¥%â€¦â€¦&*ï¼ˆï¼‰</li>
                        <li>Emojiï¼šğŸ˜€ğŸ‰ğŸ”¥ğŸ’»ğŸŒˆ</li>
                    </ul>
                    <p>å¦‚æœæ‚¨èƒ½æ­£ç¡®çœ‹åˆ°æ‰€æœ‰å†…å®¹ï¼Œè¯´æ˜UTF-8ç¼–ç å·¥ä½œæ­£å¸¸ã€‚</p>
                </body>
                </html>
            `;
            
            const iframe = document.getElementById('testFrame');
            iframe.srcdoc = content;
            log('âœ… UTF-8å†…å®¹å·²åŠ è½½åˆ°iframe');
        }

        function testGBKContent() {
            log('æµ‹è¯•GBKç¼–ç å†…å®¹...');
            const content = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="GBK">
                    <title>GBKæµ‹è¯•</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; }
                        h1 { color: #666; }
                    </style>
                </head>
                <body>
                    <h1>GBKç¼–ç æµ‹è¯•</h1>
                    <p>è¿™æ˜¯ä½¿ç”¨GBKç¼–ç çš„å†…å®¹</p>
                    <p>å¦‚æœæ˜¾ç¤ºæ­£å¸¸ï¼Œè¯´æ˜ç¼–ç å¤„ç†æ­£ç¡®</p>
                </body>
                </html>
            `;
            
            const iframe = document.getElementById('testFrame');
            iframe.srcdoc = content;
            log('âœ… GBKå†…å®¹å·²åŠ è½½åˆ°iframe');
        }

        function testBlobUrl() {
            log('æµ‹è¯•Blob URLæ–¹å¼...');
            const content = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <title>Blob URLæµ‹è¯•</title>
                    <style>
                        body { 
                            font-family: -apple-system, BlinkMacSystemFont, sans-serif; 
                            padding: 20px; 
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            color: white;
                        }
                        .card {
                            background: rgba(255,255,255,0.1);
                            padding: 20px;
                            border-radius: 10px;
                            backdrop-filter: blur(10px);
                        }
                    </style>
                </head>
                <body>
                    <div class="card">
                        <h1>ğŸ¨ Blob URLæµ‹è¯•</h1>
                        <p>è¿™ä¸ªå†…å®¹é€šè¿‡Blob URLåŠ è½½ï¼Œå¯ä»¥é¿å…ç¼–ç é—®é¢˜ã€‚</p>
                        <p>ä¸­æ–‡å†…å®¹ï¼šä»£ç†æµè§ˆå™¨æµ‹è¯•é¡µé¢</p>
                        <p>ç‰¹æ®Šå­—ç¬¦ï¼šÂ©Â®â„¢â‚¬Â£Â¥</p>
                        <p>å¦‚æœæ˜¾ç¤ºæ­£å¸¸ï¼Œè¯´æ˜Blob URLæ–¹å¼å·¥ä½œè‰¯å¥½ã€‚</p>
                    </div>
                </body>
                </html>
            `;
            
            const iframe = document.getElementById('testFrame');
            const blob = new Blob([content], { type: 'text/html; charset=utf-8' });
            const blobUrl = URL.createObjectURL(blob);
            
            iframe.onload = () => {
                URL.revokeObjectURL(blobUrl);
                log('âœ… Blob URLå†…å®¹åŠ è½½å®Œæˆ');
            };
            
            iframe.src = blobUrl;
            log('ğŸ”„ æ­£åœ¨åŠ è½½Blob URLå†…å®¹...');
        }

        function testSrcdoc() {
            log('æµ‹è¯•srcdocæ–¹å¼...');
            const content = `
                <html>
                <head>
                    <meta charset="UTF-8">
                    <title>srcdocæµ‹è¯•</title>
                    <style>
                        body { 
                            font-family: 'Segoe UI', sans-serif; 
                            padding: 20px;
                            background: #f0f2f5;
                        }
                        .content {
                            background: white;
                            padding: 20px;
                            border-radius: 8px;
                            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                        }
                    </style>
                </head>
                <body>
                    <div class="content">
                        <h1>ğŸ“„ srcdocæ–¹å¼æµ‹è¯•</h1>
                        <p>ä½¿ç”¨iframeçš„srcdocå±æ€§ç›´æ¥è®¾ç½®HTMLå†…å®¹</p>
                        <p>ä¸­æ–‡æµ‹è¯•ï¼šè¿™æ˜¯ä¸­æ–‡å†…å®¹</p>
                        <p>å¦‚æœæ˜¾ç¤ºæ­£å¸¸ï¼Œè¯´æ˜srcdocæ–¹å¼æœ‰æ•ˆã€‚</p>
                    </div>
                </body>
                </html>
            `;
            
            const iframe = document.getElementById('testFrame');
            iframe.src = '';
            iframe.srcdoc = content;
            log('âœ… srcdocå†…å®¹å·²è®¾ç½®');
        }

        function testYouTube() {
            log('æµ‹è¯•YouTubeé¡µé¢ï¼ˆæ¨¡æ‹Ÿï¼‰...');
            const content = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <title>YouTubeæ¨¡æ‹Ÿé¡µé¢</title>
                    <style>
                        body { 
                            font-family: Roboto, Arial, sans-serif; 
                            margin: 0; 
                            padding: 20px;
                            background-color: #0f0f0f;
                            color: white;
                        }
                        .header {
                            background-color: #212121;
                            padding: 10px 20px;
                            margin: -20px -20px 20px -20px;
                        }
                        .logo {
                            color: #ff0000;
                            font-size: 24px;
                            font-weight: bold;
                        }
                        .video-item {
                            background-color: #1a1a1a;
                            padding: 15px;
                            margin: 10px 0;
                            border-radius: 8px;
                        }
                        .video-title {
                            color: #ffffff;
                            font-size: 16px;
                            margin-bottom: 5px;
                        }
                        .video-desc {
                            color: #aaaaaa;
                            font-size: 14px;
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <div class="logo">ğŸ“º YouTube (æ¨¡æ‹Ÿ)</div>
                    </div>
                    
                    <div class="video-item">
                        <div class="video-title">ä»£ç†æµè§ˆå™¨æµ‹è¯•è§†é¢‘</div>
                        <div class="video-desc">è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿçš„YouTubeé¡µé¢ï¼Œç”¨æ¥æµ‹è¯•iframeæ˜¾ç¤ºæ•ˆæœã€‚</div>
                    </div>
                    
                    <div class="video-item">
                        <div class="video-title">ä¸­æ–‡å†…å®¹æµ‹è¯•</div>
                        <div class="video-desc">æµ‹è¯•ä¸­æ–‡å­—ç¬¦æ˜¾ç¤ºï¼šä½ å¥½ä¸–ç•Œï¼è¿™æ˜¯ä»£ç†æœåŠ¡å™¨æµ‹è¯•ã€‚</div>
                    </div>
                    
                    <div class="video-item">
                        <div class="video-title">ç¼–ç æµ‹è¯•</div>
                        <div class="video-desc">ç‰¹æ®Šå­—ç¬¦ï¼šÂ©Â®â„¢ Emojiï¼šğŸ¥ğŸ¬ğŸ­ å¦‚æœéƒ½èƒ½æ­£ç¡®æ˜¾ç¤ºï¼Œè¯´æ˜ç¼–ç å¤„ç†æ­£ç¡®ã€‚</div>
                    </div>
                </body>
                </html>
            `;
            
            const iframe = document.getElementById('testFrame');
            const blob = new Blob([content], { type: 'text/html; charset=utf-8' });
            const blobUrl = URL.createObjectURL(blob);
            
            iframe.onload = () => {
                URL.revokeObjectURL(blobUrl);
                log('âœ… YouTubeæ¨¡æ‹Ÿé¡µé¢åŠ è½½å®Œæˆ');
            };
            
            iframe.src = blobUrl;
            log('ğŸ”„ æ­£åœ¨åŠ è½½YouTubeæ¨¡æ‹Ÿé¡µé¢...');
        }

        function clearFrame() {
            log('æ¸…ç©ºiframe...');
            const iframe = document.getElementById('testFrame');
            iframe.src = '';
            iframe.srcdoc = '';
            log('âœ… iframeå·²æ¸…ç©º');
        }

        // é¡µé¢åŠ è½½å®Œæˆæ—¶çš„åˆå§‹åŒ–
        window.onload = function() {
            log('ğŸ“‹ iframeç¼–ç æµ‹è¯•é¡µé¢å·²åŠ è½½');
            log('ğŸ‘† ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ¥æµ‹è¯•ä¸åŒçš„å†…å®¹åŠ è½½æ–¹å¼');
        };
    </script>
</body>
</html>
