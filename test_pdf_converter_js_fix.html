<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDFè½¬æ¢å™¨JavaScriptä¿®å¤æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #ffffff;
        }
        .test-section {
            background: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border: 1px solid #333;
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .upload-area {
            border: 2px dashed #666;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            border-radius: 10px;
            cursor: pointer;
        }
        .upload-area:hover {
            border-color: #007bff;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .status.success {
            background: #28a745;
            color: white;
        }
        .status.error {
            background: #dc3545;
            color: white;
        }
        .status.warning {
            background: #ffc107;
            color: black;
        }
    </style>
</head>
<body>
    <h1>PDFè½¬æ¢å™¨JavaScriptä¿®å¤æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>æµ‹è¯•1: updateUploadHintå‡½æ•°</h2>
        <p>æµ‹è¯•ä¿®å¤åçš„updateUploadHintå‡½æ•°æ˜¯å¦èƒ½å®‰å…¨å¤„ç†ä¸å­˜åœ¨çš„å…ƒç´ </p>
        <button class="test-button" onclick="testUpdateUploadHint()">æµ‹è¯•updateUploadHint</button>
        <div id="test1-result"></div>
    </div>
    
    <div class="test-section">
        <h2>æµ‹è¯•2: safeClickå‡½æ•°</h2>
        <p>æµ‹è¯•ä¿®å¤åçš„safeClickå‡½æ•°æ˜¯å¦èƒ½å¤„ç†ä¸å­˜åœ¨çš„å…ƒç´ </p>
        <button class="test-button" onclick="testSafeClick()">æµ‹è¯•safeClick</button>
        <div id="test2-result"></div>
    </div>
    
    <div class="test-section">
        <h2>æµ‹è¯•3: æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ</h2>
        <p>æµ‹è¯•æ–‡ä»¶ä¸Šä¼ åŒºåŸŸçš„åŠŸèƒ½</p>
        <div class="upload-area" onclick="safeClick('fileInput')" id="uploadArea">
            <div>ğŸ“ ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</div>
            <div id="uploadHint">æ”¯æŒå¤šç§æ ¼å¼æ–‡ä»¶</div>
            <input type="file" id="fileInput" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" style="display: none;">
        </div>
        <button class="test-button" onclick="removeFileInput()">ç§»é™¤fileInputå…ƒç´ </button>
        <button class="test-button" onclick="recreateFileInput()">é‡æ–°åˆ›å»ºfileInputå…ƒç´ </button>
        <div id="test3-result"></div>
    </div>
    
    <div class="test-section">
        <h2>æµ‹è¯•4: è½¬æ¢ç±»å‹é€‰æ‹©</h2>
        <p>æµ‹è¯•ä¸åŒè½¬æ¢ç±»å‹çš„æç¤ºæ›´æ–°</p>
        <button class="test-button" onclick="testSelectType('pdf-to-word')">PDFè½¬Word</button>
        <button class="test-button" onclick="testSelectType('word-to-pdf')">Wordè½¬PDF</button>
        <button class="test-button" onclick="testSelectType('text-to-pdf')">æ–‡æœ¬è½¬PDF</button>
        <div id="test4-result"></div>
    </div>

    <script>
        // ä¿®å¤åçš„updateUploadHintå‡½æ•°
        function updateUploadHint(type) {
            const uploadHint = document.getElementById('uploadHint');
            const fileInput = document.getElementById('fileInput');
            
            // å®‰å…¨åœ°æ›´æ–°uploadHint
            if (uploadHint) {
                switch(type) {
                    case 'pdf-to-word':
                        uploadHint.textContent = 'æ”¯æŒPDFæ–‡ä»¶ï¼Œæœ€å¤§100MB';
                        break;
                    case 'word-to-pdf':
                        uploadHint.textContent = 'æ”¯æŒWordæ–‡æ¡£ (.doc, .docx)ï¼Œæœ€å¤§100MB';
                        break;
                    case 'pdf-to-image':
                        uploadHint.textContent = 'æ”¯æŒPDFæ–‡ä»¶ï¼Œæœ€å¤§100MB';
                        break;
                    case 'image-to-pdf':
                        uploadHint.textContent = 'æ”¯æŒå›¾ç‰‡æ–‡ä»¶ (.jpg, .jpeg, .png, .gif, .bmp, .tiff)ï¼Œæœ€å¤§100MB';
                        break;
                    case 'pdf-to-text':
                        uploadHint.textContent = 'æ”¯æŒPDFæ–‡ä»¶ï¼Œæœ€å¤§100MB';
                        break;
                    case 'text-to-pdf':
                        uploadHint.textContent = 'è¯·è¾“å…¥è¦è½¬æ¢çš„æ–‡æœ¬å†…å®¹';
                        showTextInput();
                        return; // æ–‡æœ¬è½¬PDFä¸éœ€è¦è®¾ç½®fileInput
                    default:
                        uploadHint.textContent = 'æ”¯æŒå¤šç§æ ¼å¼æ–‡ä»¶ï¼Œæœ€å¤§100MB';
                }
            }
            
            // å®‰å…¨åœ°æ›´æ–°fileInput
            if (fileInput) {
                switch(type) {
                    case 'pdf-to-word':
                        fileInput.accept = '.pdf';
                        break;
                    case 'word-to-pdf':
                        fileInput.accept = '.doc,.docx';
                        break;
                    case 'pdf-to-image':
                        fileInput.accept = '.pdf';
                        break;
                    case 'image-to-pdf':
                        fileInput.accept = '.jpg,.jpeg,.png,.gif,.bmp,.tiff';
                        break;
                    case 'pdf-to-text':
                        fileInput.accept = '.pdf';
                        break;
                    default:
                        fileInput.accept = '.pdf,.doc,.docx,.jpg,.jpeg,.png,.gif,.bmp,.tiff';
                }
            } else {
                console.warn('fileInput element not found, skipping accept attribute update');
            }
        }

        // ä¿®å¤åçš„safeClickå‡½æ•°
        function safeClick(elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                element.click();
            } else {
                console.warn(`Element with id '${elementId}' not found`);
                // ä¸æ˜¾ç¤ºé”™è¯¯é€šçŸ¥ï¼Œé¿å…ç”¨æˆ·ä½“éªŒé—®é¢˜
                // å°è¯•é‡æ–°åˆ›å»ºå…ƒç´ ï¼ˆå¦‚æœæ˜¯fileInputï¼‰
                if (elementId === 'fileInput') {
                    const uploadArea = document.getElementById('uploadArea');
                    if (uploadArea) {
                        // é‡æ–°åˆ›å»ºfileInputå…ƒç´ 
                        const fileInput = document.createElement('input');
                        fileInput.type = 'file';
                        fileInput.id = 'fileInput';
                        fileInput.accept = '.pdf,.doc,.docx,.jpg,.jpeg,.png,.gif,.bmp,.tiff';
                        fileInput.style.display = 'none';
                        fileInput.addEventListener('change', handleFileUpload);
                        uploadArea.appendChild(fileInput);
                        
                        // ç°åœ¨ç‚¹å‡»æ–°åˆ›å»ºçš„å…ƒç´ 
                        fileInput.click();
                    }
                }
            }
        }

        // æ˜¾ç¤ºæ–‡æœ¬è¾“å…¥åŒºåŸŸ
        function showTextInput() {
            const uploadArea = document.getElementById('uploadArea');
            uploadArea.innerHTML = `
                <div>âœï¸ æ–‡æœ¬è½¬PDF</div>
                <textarea id="textInput" placeholder="è¯·è¾“å…¥è¦è½¬æ¢ä¸ºPDFçš„æ–‡æœ¬å†…å®¹..." 
                          style="width: 100%; min-height: 200px; margin: 1rem 0; padding: 1rem; 
                                 border: 1px solid #666; border-radius: 8px; 
                                 background: #333; color: white; resize: vertical;"></textarea>
                <div>æ”¯æŒå¤šè¡Œæ–‡æœ¬ï¼Œè‡ªåŠ¨åˆ†é¡µ</div>
            `;
            
            // ç§»é™¤uploadAreaçš„onclickäº‹ä»¶ï¼Œé¿å…å†²çª
            uploadArea.removeAttribute('onclick');
        }

        // æ–‡ä»¶ä¸Šä¼ å¤„ç†
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                showStatus(`å·²é€‰æ‹©æ–‡ä»¶: ${file.name}`, 'success');
            }
        }

        // æ˜¾ç¤ºçŠ¶æ€
        function showStatus(message, type) {
            const result = document.getElementById('test3-result');
            result.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        // æµ‹è¯•å‡½æ•°
        function testUpdateUploadHint() {
            const result = document.getElementById('test1-result');
            try {
                // æµ‹è¯•æ­£å¸¸æƒ…å†µ
                updateUploadHint('pdf-to-word');
                
                // æµ‹è¯•fileInputä¸å­˜åœ¨çš„æƒ…å†µ
                const fileInput = document.getElementById('fileInput');
                if (fileInput) {
                    fileInput.remove();
                }
                updateUploadHint('word-to-pdf');
                
                result.innerHTML = '<div class="status success">âœ… updateUploadHintå‡½æ•°æµ‹è¯•é€šè¿‡ï¼Œæ²¡æœ‰æŠ›å‡ºé”™è¯¯</div>';
            } catch (error) {
                result.innerHTML = `<div class="status error">âŒ updateUploadHintå‡½æ•°æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
            }
        }

        function testSafeClick() {
            const result = document.getElementById('test2-result');
            try {
                // æµ‹è¯•æ­£å¸¸æƒ…å†µ
                safeClick('fileInput');
                
                // æµ‹è¯•å…ƒç´ ä¸å­˜åœ¨çš„æƒ…å†µ
                const fileInput = document.getElementById('fileInput');
                if (fileInput) {
                    fileInput.remove();
                }
                safeClick('fileInput');
                
                result.innerHTML = '<div class="status success">âœ… safeClickå‡½æ•°æµ‹è¯•é€šè¿‡ï¼Œæ²¡æœ‰æŠ›å‡ºé”™è¯¯</div>';
            } catch (error) {
                result.innerHTML = `<div class="status error">âŒ safeClickå‡½æ•°æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
            }
        }

        function removeFileInput() {
            const fileInput = document.getElementById('fileInput');
            if (fileInput) {
                fileInput.remove();
                showStatus('fileInputå…ƒç´ å·²ç§»é™¤', 'warning');
            } else {
                showStatus('fileInputå…ƒç´ ä¸å­˜åœ¨', 'warning');
            }
        }

        function recreateFileInput() {
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.id = 'fileInput';
            fileInput.accept = '.pdf,.doc,.docx,.jpg,.jpeg,.png,.gif,.bmp,.tiff';
            fileInput.style.display = 'none';
            fileInput.addEventListener('change', handleFileUpload);
            uploadArea.appendChild(fileInput);
            showStatus('fileInputå…ƒç´ å·²é‡æ–°åˆ›å»º', 'success');
        }

        function testSelectType(type) {
            const result = document.getElementById('test4-result');
            try {
                updateUploadHint(type);
                const uploadHint = document.getElementById('uploadHint');
                result.innerHTML = `<div class="status success">âœ… è½¬æ¢ç±»å‹ "${type}" æµ‹è¯•é€šè¿‡ï¼Œæç¤º: "${uploadHint.textContent}"</div>`;
            } catch (error) {
                result.innerHTML = `<div class="status error">âŒ è½¬æ¢ç±»å‹ "${type}" æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            const fileInput = document.getElementById('fileInput');
            if (fileInput) {
                fileInput.addEventListener('change', handleFileUpload);
            }
        });
    </script>
</body>
</html> 